services:
  mailmind:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: mailmind-ai
    restart: unless-stopped
    environment:
      - IMAP_HOST=${IMAP_HOST}
      - IMAP_PORT=${IMAP_PORT:-993}
      - IMAP_USER=${IMAP_USER}
      - IMAP_PASSWORD=${IMAP_PASSWORD}
      - IMAP_FOLDER=${IMAP_FOLDER:-INBOX}
      - IMAP_SPAM_FOLDER=${IMAP_SPAM_FOLDER}
      - IMAP_USE_IDLE=${IMAP_USE_IDLE:-true}
      - IMAP_POLL_INTERVAL=${IMAP_POLL_INTERVAL:-60}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - SPAM_THRESHOLD=${SPAM_THRESHOLD:-0.7}
      - LOG_LEVEL=${LOG_LEVEL:-INFO}
    logging:
      driver: json-file
      options:
        max-size: "10m"
        max-file: "3"
